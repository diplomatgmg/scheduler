# $schema: https://json.schemastore.org/github-action.json

name: Telegram Notify
description: 'Send notification to Telegram'

inputs:
  job_name:
    description: 'Name of the failed job'
    required: true
  to:
    description: 'Telegram Chat ID'
    required: true
  token:
    description: 'Telegram Bot Token'
    required: true

runs:
  using: composite
  steps:
    - name: Send Telegram Notification
      uses: appleboy/telegram-action@master
      with:
        to: ${{ inputs.to }}
        token: ${{ inputs.token }}
        message: |
          *Job*: ${{ inputs.job_name }}
          *Repository*: ${{ github.server_url }}/${{ github.repository }}
          *Ref*: {{ commit.ref }}
          *Workflow*: {{ github.workflow }}
          *Event*: {{ github.event.name }}
          *Actor*: {{ repo.namespace }}
          Workflow:
          ${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}
#        message: |
#
#          *Job*: ${{ inputs.job_name }}
#          *Repository*: ${{ github.repository }}
#          *Event*: ${{ github.event_name }}
#          *Author*: ${{ github.actor }}
#          *PR*: ${{ github.event.pull_request.title }}
#
#          ðŸ”— [View Workflow Run](${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }})
